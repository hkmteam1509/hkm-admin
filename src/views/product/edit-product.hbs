{{#section 'head'}}
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">   
    <title>Edit Product</title>
    <meta name="description" content="">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="/css/owl.carousel.css">
    <link rel="stylesheet" href="/css/owl.theme.css">
    <link rel="stylesheet" href="/css/owl.transitions.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="/css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="/css/normalize.css">
    <!-- meanmenu icon CSS
		============================================ -->
    <link rel="stylesheet" href="/css/meanmenu.min.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="/css/main.css">
    <!-- datapicker CSS
		============================================ -->
    <link rel="stylesheet" href="/css/datapicker/datepicker3.css">
    <!-- colorpicker CSS
		============================================ -->
    <link rel="stylesheet" href="/css/colorpicker/colorpicker.css">
    <!-- dropzone CSS
		============================================ -->
    <link href="https://unpkg.com/dropzone@6.0.0-beta.1/dist/dropzone.css" rel="stylesheet" type="text/css" />
    <!-- educate icon CSS
		============================================ -->
    <link rel="stylesheet" href="/css/educate-custon-icon.css">
    <!-- modals CSS
		============================================ -->
    <link rel="stylesheet" href="/css/modals.css">
    <!-- morrisjs CSS
		============================================ -->
    <link rel="stylesheet" href="/css/morrisjs/morris.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="/css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- metisMenu CSS
		============================================ -->
    <link rel="stylesheet" href="/css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="/css/metisMenu/metisMenu-vertical.css">
    <!-- calendar CSS
		============================================ -->
    <link rel="stylesheet" href="/css/calendar/fullcalendar.min.css">
    <link rel="stylesheet" href="/css/calendar/fullcalendar.print.min.css">
    <!-- x-editor CSS
		============================================ -->
    <link rel="stylesheet" href="/css/editor/select2.css">
    <link rel="stylesheet" href="/css/editor/datetimepicker.css">
    <link rel="stylesheet" href="/css/editor/bootstrap-editable.css">
    <link rel="stylesheet" href="/css/editor/x-editor-style.css">
    <!-- normalize CSS
        ============================================ -->
    <link rel="stylesheet" href="/css/data-table/bootstrap-table.css">
    <link rel="stylesheet" href="/css/data-table/bootstrap-editable.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="/style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="/css/responsive.css">
    <!-- modernizr JS
		============================================ -->
    <link rel="stylesheet" href="/css/my-css.css">
    <script src="/js/vendor/modernizr-2.8.3.min.js"></script>
{{/section}}

<div class="single-pro-review-area mt-t-30 mg-b-15">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="add-product">
                    <a href="#" style="color: black; position: relative; background: transparent; padding: 0px"><button data-toggle="modal" data-target="#deleteProductModal" title="Edit" class="pd-setting-ed"><i class="fa fa-trash-o" aria-hidden="true"></i></button></a>
                    <!-- <button title="Delete" class="pd-setting-ed" data-toggle="modal" data-target="#deleteProductModal" style="color: black; position: relative; background: transparent; padding: 0px"><i class="fa fa-trash-o" aria-hidden="true"></i></button> -->
                </div>
                <div class="product-payment-inner-st">
                    <ul id="myTabedu1" class="tab-review-design">
                        <li class="active"><a href="#description">Details</a></li>
                        <li><a href="#reviews">Images</a></li>
                        <li><a href="#INFORMATION" id="review-tab-button">Reviews</a></li>
                    </ul>
                    <div id="myTabContent" class="tab-content custom-product-edit">
                        <div class="product-tab-list tab-pane fade active in" id="description">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="review-content-section">
                                        <form class="needs-validation" method="post" action="/products/edit/detail/{{item.proID}}?_method=PUT" name="editProductForm" id="edit-product-form" novalidate> 
                                            <div class="row">
                                                {{#with item}}
                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                        <label>Name:</label>
                                                        <div class="form-group">
                                                            <input name="editNameBox" type="text" class="form-control" value="{{proName}}" required>
                                                            <div class="invalid-feedback">
                                                                Please provide a valid name.
                                                            </div>
                                                        </div>
                                                        <label>Brand:</label>
                                                        <div class="form-group">
                                                            <select name="editBrandBox" class="form-control">
                                                                {{#each brands}}
                                                                    {{#isEqual this.brandID ../brandID}}
                                                                        <option value="{{this.brandID}}" selected = "">{{this.brandName}}</option>
                                                                    {{else}}
                                                                        <option value="{{this.brandID}}">{{this.brandName}}</option>
                                                                    {{/isEqual}}
                                                                {{/each}}
                                                            </select>
                                                        </div>
                                                       
                                                        <label>Category:</label>
                                                        <div class="form-group">
                                                            <select name="editCateBox" class="form-control">
                                                                {{#each categories}}
                                                                    {{#isEqual this.catID ../catID}}
                                                                        <option value="{{this.catID}}" selected = "">{{this.catName}}</option>
                                                                    {{else}}
                                                                        <option value="{{this.catID}}">{{this.catName}}</option>
                                                                    {{/isEqual}}
                                                                {{/each}}
                                                            </select>
                                                        </div>
                                                        <label>Created date:</label>
                                                        <div class="form-group">
                                                            <input name="birthdate" type="text" class="form-control" required value="{{proDate}}" readonly="">
                                                        </div>
                                                        <label>Quantity sold:</label>
                                                        <div class="form-group">
                                                            <input  type="number" class="form-control" required value="{{sold}}" readonly="">
                                                        </div>
                                                        <label>Price($):</label>
                                                        <div class="form-group">
                                                            <input name="proPrice" type="number" min="0"  class="form-control"  placeholder="Price" value="{{price}}" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                        <label>Gender:</label>
                                                        <div class="form-group">
                                                            <select required name="editGenderBox" class="form-control">
                                                                {{#isEqual sex 0}}
                                                                    <option value="0" selected="">Men</option>
                                                                    <option value="1">Women</option>
                                                                    <option value="2">Unisex</option>
                                                                {{/isEqual}}
                                                                {{#isEqual sex 1}}
                                                                    <option value="0">Men</option>
                                                                    <option value="1" selected="">Women</option>
                                                                    <option value="2">Unisex</option>
                                                                {{/isEqual}}
                                                                {{#isEqual sex 2}}
                                                                    <option value="0">Men</option>
                                                                    <option value="1">Women</option>
                                                                    <option value="2" selected="">Unisex</option>
                                                                {{/isEqual}}
                                                            </select>
                                                        </div>
                                                        <label>Summary description:</label>
                                                        <div class="form-group res-mg-t-15">
                                                            <input required name="editSubDesBox" type="text" class="form-control"  value="{{description}}">
                                                            <div class="invalid-feedback">
                                                                Please provide a valid description.
                                                            </div>
                                                        </div>
                                                        <label>Full description:</label>
                                                        <div class="form-group edit-ta-resize">
                                                            <textarea name="editDesBox" class="form-control" required>{{fullDescription}}</textarea>
                                                            <div class="invalid-feedback">
                                                                Please provide a valid description.
                                                            </div>
                                                        </div>
                                                        <div class="form-group edit-ta-resize">
                                                            {{#isEqual isFeature 1}}
                                                                <input name="editFeatureBox" id="proFeature" type="checkbox" class="i-checks" checked=""/>
                                                            {{else}}
                                                                <input name="editFeatureBox" id="proFeature" type="checkbox" class="i-checks"/>
                                                            {{/isEqual}}
                                                            <label for="proFeature">Mark as Feature Product</label> 
                                                        </div>
                                                    </div>
                                                {{/with}}    
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    <div class="product-status-wrap drp-lst">
                                                        <h4>Attributes List</h4>
                                                        <div class="add-product">
                                                            <a href="#" data-toggle="modal" data-target="#addAttributesModal">Add Attributes</a>
                                                        </div>
                                                        <div class="asset-inner">
                                                            <table id="product-attri-table">
                                                                <tr>
                                                                    <th>No</th>
                                                                    <th>Color</th>
                                                                    <th>Quantity</th>
                                                                    <th>Setting</th>
                                                                </tr>
                                                                {{#each details}}
                                                                    <tr>
                                                                        <td>{{this.No}} <input name="detailID" value="{{this.detailID}}" style="display: none;" readonly/></td>
                                                                        <td><input name="colors" class="my-attribute-input my-attribute-input-color" style="background: {{this.color}}" readonly type="text" value="{{this.color}}" /></td>
                                                                        <td><input name="quantity" class="my-attribute-input" readonly type="number" value="{{this.quantity}}"/></td>
                                                                        <td>
                                                                            <a class="my-toggle-edit-modal" href="#" data-id="{{this.No}}" data-toggle="modal" data-target="#editAttributesModal" data-color="{{this.color}}" data-quantity="{{this.quantity}}"  style="color: black;"><button data-toggle="tooltip" title="Edit" class="pd-setting-ed"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button></a>
                                                                            <button onClick="removeRow({{this.No}})" data-toggle="tooltip" title="Trash" class="pd-setting-ed" style="color: black; cursor:pointer"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
                                                                        </td>
                                                                    </tr>
                                                                   
                                                                {{/each}}
                                                            </table>
                                                        </div>
                                                        <div class="attri-empty-feedback" style="color: #dc3545;font-size: 80%; visibility:hidden;">
										                    Please add at least one attribute.
									                    </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="payment-adress">
                                                        <!-- <button type="submit" class="btn btn-primary waves-effect waves-light">Submit</button> -->
                                                        <button type="submit" class="btn btn-primary waves-effect waves-light">Update</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
									<div id="addAttributesModal" class="modal modal-edu-general default-popup-PrimaryModal fade" role="dialog">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header header-color-modal bg-color-1">
													<h4 class="modal-title" style="color: white;">Add Attributes</h4>
													<div class="modal-close-area modal-close-df">
														<a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
													</div>
												</div>
												<form class="needs-validation" onsubmit="return onAddAtribute()" name="add-modal" novalidate>
													<div class="modal-body" style="padding: 0; text-align: left">
														<div style="padding: 20px; background-color: white; margin: 20px;">
														<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<div class="colorpicker-inner ts-forms mg-b-23">
																			<div class="tsbox">
																				<label class="label"><b>Color:</b></label>
																				<label class="color-group" for="hex">
																					<input required name="proColorModal" class=" form-control" type="text" value="#ff0000" id="hex" readonly="">
																						<div class="invalid-feedback">
																							Please provide a valid color.
																						</div>
																				</label>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label for="addQuantityBox">Quantity:</label>
																		<input required name="proQuantityModal" id="addQuantityBox" name="coursename" type="number" min="0" class="form-control" placeholder="Quantity">
																		<div class="invalid-feedback">
																			Please provide a valid quantity.
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<div class="modal-footer">
														<button class="btn btn-primary waves-effect waves-light" type="button" data-dismiss="modal">Cancel</button>
														<button class="btn btn-primary waves-effect waves-light" type="submit">Add</button>
													</div>
												</form>
											</div>
										</div>
									</div>
									
									<div id="editAttributesModal" class="modal modal-edu-general default-popup-PrimaryModal fade" role="dialog">
										<div class="modal-dialog">
											<div class="modal-content">
												<div class="modal-header header-color-modal bg-color-1">
													<h4 class="modal-title" style="color: white;">Edit Attributes</h4>
													<div class="modal-close-area modal-close-df">
														<a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
													</div>
												</div>
												<form class="needs-validation" onsubmit="return onEditAtribute()" name="edit-modal" novalidate>
													<div class="modal-body" style="padding: 0; text-align: left">
														<div style="padding: 20px; background-color: white; margin: 20px;">
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<div class="colorpicker-inner ts-forms mg-b-23">
																			<div class="tsbox">
																				<label class="label"><b>Color:</b></label>
																				<label class="color-group" for="hex1">
																					<input required name="proEditColor" type="text" placeholder="#ff0000" id="hex1" readonly="">
																					<div class="invalid-feedback">
																						Please provide a valid color.
																					</div>
																				</label>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label for="editQuantityBox">Quantity:</label>
																		<input required name="proEditQuantity" id="editQuantityBox" type="number" min="0"  class="form-control" placeholder="Quantity">
																		<div class="invalid-feedback">
																			Please provide a valid Quantity.
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<div class="modal-footer">
													<button class="btn btn-primary waves-effect waves-light" type="button" data-dismiss="modal">Cancel</button>
													<button class="btn btn-primary waves-effect waves-light" type="submit">Update</button>
												</div>
												</form>
											</div>
										</div>
									</div>
                                </div>
                            </div>
                        </div>
                        <div class="product-tab-list tab-pane fade" id="reviews">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="review-content-section">
                                        <form method="post" action="/products/edit/image/{{item.proID}}?_method=PUT" class="dropzone dropzone-custom needsclick" id="update-image-form">
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                    {{#each images}}
                                                        {{!-- <div class="form-group">
                                                            <label>Image {{this.No}}:</label>
                                                        </div>
                                                        <img class="my-edit-img" src="{{this.proImage}}" alt="Image {{this.No}}" /> --}}
                                                        <div class="form-group">
                                                            <input style="display: none;" id="checkbox{{this.No}}" type="checkbox" name="productImages" value="{{this.proImage}}">       
                                                            {{!-- <label for="checkbox{{this.No}}"> Select to remove</label> --}}
                                                        </div>
                                                    {{/each}}

                                                
                                                    <div class="form-group">
                                                        <label>Add more images:</label>
                                                    </div>
                                                    <div class="dropzone-pro mg-tb-30">
                                                        <div id="dropzone1" class="multi-uploader-cs">
                                                            <div class="dz-message needsclick download-custom">
                                                                <i class="fa fa-download" aria-hidden="true"></i>
                                                                <h2>Drop files here or click to upload.</h2>
                                                            </div>
                                                        </div>
                                                    </div>
                                                     <div class="file-empty-feedback" style="color: #dc3545;font-size: 80%; visibility:hidden">
                                                            Please add at least one photo.
                                                    </div>
                                                    <div id="imagePreviewContainer" class="dropzone-previews"></div>
                                                </div>
                                            </div>
                                            
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="payment-adress">
                                                       <button type="submit" id="submit-image" class="btn btn-primary waves-effect waves-light">Update</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="product-tab-list tab-pane fade" id="INFORMATION">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <div class="review-content-section">
                                        <div class="chat-discussion" style="height: auto">
                                            {{#each reviews}}
                                                <div class="chat-message">
                                                    <!-- <div class="profile-hdtc">
                                                        <img class="message-avatar" src="/img/contact/1.jpg" alt="">
                                                    </div> -->
                                                    <div class="message" style="margin-left: 0px">
                                                        {{#if this.userID}}
                                                            <a class="message-author" href="/users/guest/{{this.userID}}"> {{this.authorName}} </a>
                                                        {{else}}
                                                            <label class="message-author"> {{this.authorName}} </label>
                                                        {{/if}}
                                                        <span class="message-date"> {{this.date}} </span>
                                                        <span class="message-content"><b>{{this.sumary}}</b></span>
                                                        <span class="message-content">{{this.com}}
                                                        </span>
                                                        <div class="m-t-md mg-t-10">
                                                            <div class="review-item-rating">
                                                                <i class="educate-icon educate-star"></i>
                                                                {{#isBigger this.rate 1}}
                                                                    <i class="educate-icon educate-star"></i>
                                                                {{/isBigger}}
                                                                {{#isBigger this.rate 2}}
                                                                    <i class="educate-icon educate-star"></i>
                                                                {{/isBigger}}
                                                                {{#isBigger this.rate 3}}
                                                                    <i class="educate-icon educate-star"></i>
                                                                {{/isBigger}}
                                                                {{#isBigger this.rate 4}}
                                                                    <i class="educate-icon educate-star"></i>
                                                                {{/isBigger}}
                                                            </div>
                                                            <button data-id="{{this.commentID}}" title="Delete" class="pd-setting-ed" data-toggle="modal" data-target="#deleteViewModal"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            {{/each}}
                                        </div>
                                        {{#if paginationArray}}
                                            <form
                                                id="pagination-form" 	
                                                method="get"
                                                action="/products/edit/{{item.proID}}"
                                            > 
                                                <ul class="my-pagination">
                                                    <li class="my-page-item">
                                                        <input onchange='this.form.submit();' style="display: none;" id="page-prev" value="{{prevPage}}" type="radio" name="reviewPage"/>
                                                        <label for="page-prev"  class="my-page-button">Prev</label>
                                                    </li>
                                                    {{#each paginationArray}}  
                                                        {{#if this.isCurrent}}
                                                            <li class="my-page-item">
                                                                <input onchange='this.form.submit();' style="display: none;" id="page-{{this.page}}" value="{{this.page}}" type="radio" name="reviewPage"/>
                                                                <label for="page-{{this.page}}"  class="my-page-link my-current-page">{{this.page}}</label>
                                                            </li>
                                                        {{else}}
                                                            <li class="my-page-item">
                                                                <input onchange='this.form.submit();' style="display: none;" id="page-{{this.page}}" value="{{this.page}}" type="radio" name="reviewPage"/>
                                                                <label for="page-{{this.page}}"  class="my-page-link">{{this.page}}</label>
                                                            </li>
                                                        {{/if}}
                                                    {{/each}}
                                                    <li class="my-page-item">
                                                        <input onchange='this.form.submit();' style="display: none;" id="page-next" value="{{nextPage}}" type="radio" name="reviewPage"/>
                                                        <label for="page-next"  class="my-page-button">Next</label>
                                                    </li>
                                                </ul>
                                            </form>
                                        {{/if}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="deleteProductModal" class="modal modal-edu-general FullColor-popup-DangerModal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-close-area modal-close-df">
                                <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                            </div>
                            <div class="modal-body">
                                <span class="educate-icon educate-danger modal-check-pro information-icon-pro"></span>
                                <h2>Delete this product?</h2>
                                <!-- <p>If you delete this product, they can not access the shop's website anymore.</p> -->
                            </div>
                            <div class="modal-footer danger-md">
                                <button class="btn btn-danger " type="button" data-dismiss="modal">Cancel</button>
                                <form method="post" style="display: none;" id="delete-product-form" action="/products/delete/{{item.proID}}?_method=DELETE"></form>
                                <button class="btn btn-danger" id="submit-delete-form" type="button">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="deleteViewModal" class="modal modal-edu-general FullColor-popup-DangerModal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-close-area modal-close-df">
                                <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                            </div>
                            <div class="modal-body">
                                <span class="educate-icon educate-danger modal-check-pro information-icon-pro"></span>
                                <h2>Delete this review?</h2>
                                <p>If you delete this review, it can not be shown on the shop's website anymore.</p>
                            </div>
                            <div class="modal-footer danger-md">
                                <button class="btn btn-danger " type="button" data-dismiss="modal">Cancel</button>
                                <form method="post" style="display: none;" id="delete-review-form" ></form>
                                <button class="btn btn-danger" id="submit-delete-review-form" type="button">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- jquery
		============================================ -->
    <script src="/js/vendor/jquery-1.12.4.min.js"></script>
    <!-- bootstrap JS
		============================================ -->
    <script src="/js/bootstrap.min.js"></script>
    <!-- wow JS
		============================================ -->
    <script src="/js/wow.min.js"></script>
    <!-- price-slider JS
		============================================ -->
    <script src="/js/jquery-price-slider.js"></script>
    <!-- meanmenu JS
		============================================ -->
    <script src="/js/jquery.meanmenu.js"></script>
    <!-- owl.carousel JS
		============================================ -->
    <script src="/js/owl.carousel.min.js"></script>
    <!-- sticky JS
		============================================ -->
    <script src="/js/jquery.sticky.js"></script>
    <!-- scrollUp JS
		============================================ -->
    <script src="/js/jquery.scrollUp.min.js"></script>
    <!-- counterup JS
		============================================ -->
    <script src="/js/counterup/jquery.counterup.min.js"></script>
    <script src="/js/counterup/waypoints.min.js"></script>
    <script src="/js/counterup/counterup-active.js"></script>
    <!-- dropzone JS
		============================================ -->
    <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
    <!-- mCustomScrollbar JS
		============================================ -->
    <script src="/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="/js/scrollbar/mCustomScrollbar-active.js"></script>
    <!-- metisMenu JS
		============================================ -->
    <script src="/js/metisMenu/metisMenu.min.js"></script>
    <script src="/js/metisMenu/metisMenu-active.js"></script>
    <!-- data table JS
		============================================ -->
    <script src="/js/data-table/bootstrap-table.js"></script>
    <script src="/js/data-table/tableExport.js"></script>
    <script src="/js/data-table/data-table-active.js"></script>
    <script src="/js/data-table/bootstrap-table-editable.js"></script>
    <script src="/js/data-table/bootstrap-editable.js"></script>
    <script src="/js/data-table/bootstrap-table-resizable.js"></script>
    <script src="/js/data-table/colResizable-1.5.source.js"></script>
    <script src="/js/data-table/bootstrap-table-export.js"></script>
    <!--  editable JS
        ============================================ -->
    <script src="/js/editable/jquery.mockjax.js"></script>
    <script src="/js/editable/mock-active.js"></script>
    <script src="/js/editable/select2.js"></script>
    <script src="/js/editable/moment.min.js"></script>
    <script src="/js/editable/bootstrap-datetimepicker.js"></script>
    <script src="/js/editable/bootstrap-editable.js"></script>
    <script src="/js/editable/xediable-active.js"></script>
    <!-- datapicker JS
		============================================ -->
    <script src="/js/datapicker/bootstrap-datepicker.js"></script>
    <script src="/js/datapicker/datepicker-active.js"></script>
    <!-- colorpicker JS
		============================================ -->
    <script src="/js/colorpicker/jquery.spectrum.min.js"></script>
    <script src="/js/colorpicker/color-picker-active.js"></script>
    <!-- Chart JS
        ============================================ -->
    <script src="/js/chart/jquery.peity.min.js"></script>
    <script src="/js/peity/peity-active.js"></script>
    <!-- tab JS
        ============================================ -->
    <script src="/js/tab.js"></script>
    <!-- morrisjs JS
		============================================ -->
    <script src="/js/morrisjs/raphael-min.js"></script>
    <script src="/js/morrisjs/morris.js"></script>
    <script src="/js/morrisjs/morris-active.js"></script>
    <!-- morrisjs JS
		============================================ -->
    <script src="/js/sparkline/jquery.sparkline.min.js"></script>
    <script src="/js/sparkline/jquery.charts-sparkline.js"></script>
    <script src="/js/sparkline/sparkline-active.js"></script>
    <!-- calendar JS
		============================================ -->
    <script src="/js/calendar/moment.min.js"></script>
    <script src="/js/calendar/fullcalendar.min.js"></script>
    <script src="/js/calendar/fullcalendar-active.js"></script>
    <!-- plugins JS
		============================================ -->
    <script src="/js/plugins.js"></script>
    <!-- main JS
		============================================ -->
    <script src="/js/main.js"></script>
    <!-- tawk chat JS
		============================================ -->
    <!-- <script src="/js/tawk-chat.js"></script> -->
   <script>
		let attriRowId;
        function paramNameForSend() {
			return "images";    
		}
        $(document).ready(function(){
            if(document.getElementById("pagination-form")){
                console.log("ha")
                $("#review-tab-button").tab('show');
            }
            const myAddProductForm = document.forms["add-product-form"];
            const deleteForm = document.getElementById("delete-product-form");
            const imageCheckboxs=document.getElementsByName("productImages");
            const upImageBtn = $("#submit-image");
            const myHiddenEditImage=document.querySelectorAll(".my-edit-img");
            const nCheckbox = imageCheckboxs.length;
            const imageForm = document.getElementById("update-image-form");
			document.getElementById("submit-delete-form").addEventListener('click', function(e){
				deleteForm.submit();
			});
            $('#editAttributesModal').on('show.bs.modal', function (event) {
                const button = $(event.relatedTarget) ;// Button that triggered the modal
                const recipient1 = button.data('color'); // Extract info from data-* attributes
                const recipient3 = button.data('quantity');
				attriRowId = button.data("id");
                const modal = $(this);
                $("#hex1").spectrum({
                    color: recipient1,
                    preferredFormat: "hex",
                    showInput: true,
                });

                modal.find('.modal-body #hex1').val(recipient1);
                $("#hex1").css({
                    display: "block",
                });
                modal.find('.modal-body #editQuantityBox').val(recipient3);
            });

			// Fetch all the forms we want to apply custom Bootstrap validation styles to
			var forms = document.getElementsByClassName('needs-validation');
			// Loop over them and prevent submission
			var validation = Array.prototype.filter.call(forms, function(form) {
				form.addEventListener('submit', function(event) {
				if (form.checkValidity() === false) {
					event.preventDefault();
					event.stopPropagation();
				}else{
                    if(forms.id==="edit-product-form"){
                        if($("#product-attri-table tr").length < 2){
						    document.querySelector(".attri-empty-feedback").style.visibility="visible";
                        }else{
                            document.querySelector(".attri-empty-feedback").style.visibility="hidden";
                        }
                    }else{
                        
                    }
				}
				
				form.classList.add('was-validated');
				}, false);
			});
            let myDropzone;

            let imageURLs = [];
            for(let i = 0 ; i < nCheckbox ; i ++){
                imageURLs.push(imageCheckboxs[i].value);
            }
			 Dropzone.options.updateImageForm = { // The camelized version of the ID of the form element
                // The configuration we've talked about above
                autoProcessQueue: false,
                uploadMultiple: false,
                parallelUploads: 100,
                maxFiles: 2-(nCheckbox),
                acceptedFiles: "image/*",
                addRemoveLinks: true,
                paramName: paramNameForSend,
                previewsContainer: document.querySelector('#imagePreviewContainer'),
                
                // The setting up of the dropzone
                init: function() {
                    myDropzone = this;
                    // First change the button to actually tell Dropzone to process the queue.
                    this.on("sendingmultiple", function() {
                            console.log("Sending");
                    });
                    this.on("success", function(files, response) {
                        window.location = response;
                        console.log("Success");
                    });
                    this.on("errormultiple", function(files, response) {

                    });
                     this.on("addedfile", function(file) {
                         
                        for(let i = 0 ; i < nCheckbox; i++){
                            if(imageCheckboxs[i].value === file.url){
                                imageCheckboxs[i].checked=false;
                                break;
                            }
                        }
                    });
                    this.on("removedfile", function(file){
                        
                        for(let i = 0 ; i < nCheckbox; i++){
                            if(imageCheckboxs[i].value === file.url){
                                myDropzone.options.maxFiles += 1;
                               imageCheckboxs[i].checked=true;
                               break;
                            }
                        }
                    })
                    for(let i = 0 ; i < nCheckbox ; i ++){
                        let mockFile = { name: "Image" + (i+1), size: 12345, url: imageURLs[i] };
                        let callback = null; // Optional callback when it's done
                        let crossOrigin = null; // Added to the `img` tag for crossOrigin handling
                        let resizeThumbnail = false; // Tells Dropzone whether it should resize the image first
                        myDropzone.displayExistingFile(mockFile, mockFile.url, callback, crossOrigin, resizeThumbnail);
                    }
                }
            }	
			

            upImageBtn.click(function(e){
                e.preventDefault();
                if(myDropzone.getQueuedFiles().length > 0){
                    myDropzone.processQueue();
                }else{
                    if($("input[name='productImages']:checked").length === nCheckbox){
						document.querySelector(".file-empty-feedback").style.visibility="visible";

                    }else{
                        document.querySelector(".file-empty-feedback").style.visibility="hidden";

                        imageForm.submit();

                    }
                }
            })
             $('#deleteViewModal').on('show.bs.modal', function (event) {
                var button = $(event.relatedTarget) // Button that triggered the modal
                var id = button.data('id') // Extract info from data-* attributes
                var modal = $(this);
                modal.find('#delete-review-form').attr('action', '/products/edit/review/' + id +'?_method=DELETE' );
            });
            document.getElementById("submit-delete-review-form").addEventListener('click', function(e){
                document.getElementById("delete-review-form").submit();
            });
		});

		function removeRow(row){
			const attriTable = document.getElementById("product-attri-table");
			attriTable.deleteRow(row);
		}
		function onEditAtribute(){
			let editAttriForm = document.forms["edit-modal"];
			if(editAttriForm.checkValidity()){
				let colors = document.getElementsByName("colors");
				let quantity = document.getElementsByName("quantity");
				let colorBox = editAttriForm["proEditColor"];
				let quantityBox = editAttriForm["proEditQuantity"];
				colors[attriRowId-1].value = colorBox.value;
				quantity[attriRowId-1].value = quantityBox.value;
                colors[attriRowId-1].style.backgroundColor=colorBox.value;
                document.querySelectorAll('.my-toggle-edit-modal')[attriRowId - 1].dataset.color = colorBox.value;
                document.querySelectorAll('.my-toggle-edit-modal')[attriRowId - 1].dataset.quantity = quantityBox.value;
				$("#editAttributesModal").modal('hide');
			}
			return false;
		}

		function onAddAtribute(){
			let addAttriForm = document.forms["add-modal"];
			console.log("add");
			if(addAttriForm.checkValidity()){
				let colorBox = addAttriForm["proColorModal"];
				let quantityBox = addAttriForm["proQuantityModal"];
				const attriTable = $("#product-attri-table");	
				const newRow = `
				<tr>
					<td>` + $("#product-attri-table tr").length + `</td>
					<td> <input name="colors" class="my-attribute-input my-attribute-input-color" style="background: ${colorBox.value}" readonly type="text" value=${colorBox.value} /></td>
					<td> <input name="quantity" class="my-attribute-input" readonly type="number" value=${quantityBox.value} /></td>
					<td> 
						<a class="my-toggle-edit-modal" href="#" data-toggle="modal" data-target="#editAttributesModal" data-id=${ $("#product-attri-table tr").length} data-color=${colorBox.value} data-quantity=${quantityBox.value} style="color: black; cursor:pointer;"><button data-toggle="tooltip" title="Edit" class="pd-setting-ed"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button></a>
						<button onClick="removeRow(${$("#product-attri-table tr").length})" data-toggle="tooltip" title="Trash" class="pd-setting-ed" style="color: black; cursor:pointer"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
					</td>
				</tr>	
				`;
			
				attriTable.append(newRow);
                document.querySelector(".attri-empty-feedback").style.visibility="hidden";
				$("#addAttributesModal").modal('hide');
			}
			return false;
		}
    </script>